window.console || (console = { log: function () { } }); function are_cookies_enabled() { var b = navigator.cookieEnabled ? !0 : !1; "undefined" != typeof navigator.cookieEnabled || b || (document.cookie = "testcookie", b = -1 != document.cookie.indexOf("testcookie") ? !0 : !1); return b }
if (are_cookies_enabled()) {
    var kaercher = kaercher || {}; kaercher.kaps = kaercher.kaps || {}; kaercher.kaps.window = window.top || window; kaercher.kaps.client = function (b) {
        var a = {}, c = {
            remoteLoginUrl: "https://kaps.kaercher.com/SSO/Login.aspx", remoteLogoffUrl: "https://kaps.kaercher.com/SSO/Logoff.aspx", remoteValidateUrl: "https://kaps.kaercher.com/SSO/AuthenticatedUser.aspx", localAppUrl: kaercher.utils.appUrlFromWindowLocation(), localTokenReceiveEp: ["GET", "/token"], localTokenStoreEp: ["POST",
            "/token"], localTokenInvalidateEp: ["DELETE", "/token"], localSignEp: ["POST", "/sign"], remoteTokenReturn: kaercher.utils.cleanedUpReturnUrl(), localTokenValidationEp: ["POST", "/token"], remoteLogoffReturnUrl: kaercher.utils.cleanedUpReturnUrl(), localLoginReturnUrl: kaercher.utils.cleanedUpReturnUrl(), cookiesAllowed: !1, tokenType: 2, redirectionAvoidCss: ".noRedirect", messageTypes: {
                loginRequest: 1, loginResponse: 2, isAuthenticatedRequest: 3, isAuthenticatedResponse: 4, logOffRequest: 5, logOffResponse: 6, getUserNameByTokenRequest: 7,
                getUserNameByTokenResponse: 8
            }, StateMachine: { initialState: "loading" }, Gui: { loadIndicator: ".loadindicator", onLoadIndicatorShow: function () { }, onLoadIndicatorHide: function () { }, loginForm: ".loginform", onLoginFormShow: function () { }, onLoginFormHide: function () { }, loggedIn: ".loggedin", onLoggedInShow: function () { }, onLoggedInHide: function () { }, serviceError: ".serviceerror", onServiceErrorShow: function () { }, onServiceErrorHide: function () { }, localError: ".serviceError", onLocalErrorShow: function () { }, onLocalErrorHide: function () { } }
        },
        d = jQuery.extend(c, b); b = kaercher.kaps.client.guiStateMachine(jQuery.extend(d.StateMachine, d.Gui)); var g = kaercher.kaps.client.protocolStateMachine(b, d); a.start = function () { g.consumeEvent("start") }; a.login = function (a, b) { g.consumeEvent("user_credentials_received", [a, b]) }; a.logoff = function () { g.consumeEvent("should_logoff") }; a.startTokenValidationOnTabActivation = function () { g.consumeEvent("tab_active") }; a.startTabDeactivationEvent = function () { $.cookie.defaults.path = "/"; $.cookie("tab_deactivated", "1") }; a.updateConfigurationValue =
        function (a) { d = jQuery.extend(d, a) }; return a
    }; kaercher.kaps.client.protocolStateMachine = function (b, a) {
        function c() { b.consumeEvent("tab_active_validation"); sessvars.$.prefs.load = "kaercher"; l() } function d() { void 0 == u ? u = new easyXDM.Socket({ remote: a.remoteValidateUrl, onReady: g, onMessage: B }) : g() } function g() { void 0 == w ? w = new easyXDM.Socket({ remote: a.remoteLoginUrl, onReady: function () { e.consumeEvent("xdm_socket_created") }, onMessage: C }) : e.consumeEvent("xdm_socket_created") } function f() {
            var a = {}; a.CurrentState =
            $.cookie("CurrentState"); a = $.extend({}, a, kaercher.utils.parseUrlQueryParams(kaercher.utils.url("?"))); "Valid" in a || (a = $.extend({}, a, kaercher.utils.parseUrlPath(kaercher.utils.url("path")))); void 0 == a.CurrentState || null == a.CurrentState || "" == a.CurrentState ? e.consumeEvent("no_state_to_restore") : ("validate_local_token" === a.CurrentState ? (e.currentState("validate_local_token"), k(a) ? e.consumeEvent("local_token_valid", n(a)) : e.consumeEvent("local_token_invalid")) : "receive_remote_token" === a.CurrentState ? (e.currentState("receive_remote_token"),
            k(a) ? ($.cookie.defaults.path = "/", $.removeCookie("CurrentState", a.CurrentState), $.cookie("LoadingCookie", "1"), e.consumeEvent("receive_remote_token_success", n(a))) : ($.cookie.defaults.path = "/", $.removeCookie("CurrentState", a.CurrentState), $.removeCookie("LoadingCookie", "1"), e.consumeEvent("receive_remote_token_failure"), sessvars.$.prefs.load = "KAPS")) : "store_tokens" === a.CurrentState ? (e.currentState("store_tokens"), e.consumeEvent("finished_storing_tokens"), $.cookie.defaults.path = "/", $.removeCookie("CurrentState",
            a.CurrentState)) : "logging_off" === a.CurrentState && (e.currentState("logging_off"), e.consumeEvent("logged_off"), $.cookie.defaults.path = "/", $.removeCookie("CurrentState", a.CurrentState), sessvars.$.prefs.load = "KAPS"), b.consumeEvent("tab_active_validation_finished"), "function" == typeof kaercher.kaps.hideLoadingAnimation && kaercher.kaps.hideLoadingAnimation())
        } function k(a) { if (!("Valid" in a)) return !1; a.Valid = a.Valid.toLowerCase(); return 1 === +a.Valid || "true" === a.Valid } function n(b) {
            return {
                Token: b.Token, TimeStamp: b.TimeStamp,
                Signature: b.Signature, MessageType: a.messageTypes.isAuthenticatedResponse, Valid: 1 === b.Valid || "true" === b.Valid
            }
        } function l() { b.consumeEvent("token_validating"); jQuery.ajax({ type: a.localTokenReceiveEp[0], url: a.localTokenReceiveEp[1], data: {}, contentType: "application/json", dataType: "json" }).done(function (a) { a ? e.consumeEvent("receive_local_token_success", a) : e.consumeEvent("receive_local_token_failed") }).fail(function (a) { e.consumeEvent("receive_local_token_error", "") }) } function m(a) {
            a && a.Token && (a = a.Token);
            h(a, function (a) { u.postMessage(JSON.stringify(a)) })
        } function h(b, c) { var d = { CorrelationId: kaercher.utils.guid(), MessageType: a.messageTypes.isAuthenticatedRequest, Token: b }; jQuery.ajax({ type: a.localSignEp[0], url: a.localSignEp[1], data: JSON.stringify(d), contentType: "application/json", dataType: "json" }).done(c).fail(function (a) { e.consumeEvent("receive_signature_val_error", "") }) } function p() {
            if (void 0 != $.cookie("tab_deactivated") && 0 < $(a.redirectionAvoidCss).length) $.cookie.defaults.path = "/", $.removeCookie("tab_deactivated",
            "1"), e.currentState("request_user_login"), b.consumeEvent("registering_user"), "function" == typeof kaercher.kaps.hideLoadingAnimation && kaercher.kaps.hideLoadingAnimation(); else { b.consumeEvent("token_validating"); var c = a.remoteTokenReturn; if (0 <= c.indexOf("#")) var d = c.split("#"), c = d[0] + r(c) + "#" + d[1]; else c += r(c); $.cookie.defaults.path = "/"; $.removeCookie("LoadingCookie", "1"); c = a.remoteValidateUrl + "?returnTo=" + encodeURIComponent(c); window.location.href = c }
        } function D() {
            "KAPS" != sessvars.$.prefs.load ? (b.consumeEvent("token_validating"),
            u.postMessage(JSON.stringify({ MessageType: a.messageTypes.isAuthenticatedRequest }))) : (b.consumeEvent("tab_active_validation_finished"), "function" == typeof kaercher.kaps.hideLoadingAnimation && kaercher.kaps.hideLoadingAnimation(), e.currentState("request_user_login"), b.consumeEvent("token_validation_failed"))
        } function E(c) {
            jQuery.ajax({ type: a.localTokenStoreEp[0], url: a.localTokenStoreEp[1], data: JSON.stringify(c), contentType: "application/json", dataType: "json" }).done(function () {
                var b = a.localLoginReturnUrl;
                if (0 <= b.indexOf("#")) var d = b.split("#"), b = d[0] + r(b) + "#" + d[1]; else b += r(b); b = a.remoteLoginUrl + "?Token=" + c.Token + "&Signature=" + c.Signature + "&TimeStamp=" + c.TimeStamp + "&ReturnTo=" + encodeURIComponent(b); window.location.href = b
            }).error(function (a) { e.consumeEvent("store_token_error", "") })
        } function q(a) { b.consumeEvent("local_error"); "" != a && e.currentState(a) } function F() { b.consumeEvent("token_validation_success") } function t(c) {
            c || e.consumeEvent("local_token_validation_service_error"); jQuery.ajax({
                type: a.localTokenValidationEp[0],
                url: a.localTokenValidationEp[1], data: JSON.stringify(c), contentType: "application/json", dataType: "json"
            }).done(function (a) { 1 == c.Valid ? b.consumeEvent("token_validation_success") : b.consumeEvent("token_validation_failed"); null != a && "" != a ? window.location.href = jQuery("<div></div>").html(a).text() : (b.consumeEvent("tab_active_validation_finished"), "function" == typeof kaercher.kaps.hideLoadingAnimation && kaercher.kaps.hideLoadingAnimation()) }).error(function () {
                e.consumeEvent("validate_SSO_error", e.currentState());
                b.consumeEvent("tab_active_validation_finished"); "function" == typeof kaercher.kaps.hideLoadingAnimation && kaercher.kaps.hideLoadingAnimation()
            })
        } function r(a) { $.cookie.defaults.path = "/"; $.cookie("CurrentState", e.currentState()); e.currentState(); a.indexOf("?"); return "" } function y(a) { b.consumeEvent("token_validation_failed", a) } function z(a) { b.consumeEvent("login_failed", a) } function x() { } function A(a) {
            b.consumeEvent("login_processing"); var c = a[1]; G(a[0], c, function (a) {
                a = { request: a }; a.request.Password = c;
                w.postMessage(JSON.stringify(a))
            })
        } function G(c, b, d) { c = { CorrelationId: kaercher.utils.guid(), MessageType: a.messageTypes.loginRequest, UserName: c, Password: b, AppURL: a.localAppUrl, TokenType: a.tokenType }; jQuery.ajax({ type: a.localSignEp[0], url: a.localSignEp[1], data: JSON.stringify(c), dataType: "json", contentType: "application/json" }).done(d).fail(function (a) { e.consumeEvent("receive_signature_login_error", "") }) } function H() {
            e.currentState("logging_off"); b.consumeEvent("logoff_processing"); jQuery.ajax({
                type: a.localTokenInvalidateEp[0],
                url: a.localTokenInvalidateEp[1], data: {}, contentType: "application/json", dataType: "json"
            }).done(function (c) { c = a.remoteLogoffReturnUrl; if (0 <= c.indexOf("#")) { var b = c.split("#"); c = b[0] + r(c) + "#" + b[1] } else c += r(c); $.cookie.defaults.path = "/"; $.removeCookie("LoadingCookie", "1"); c = a.remoteLogoffUrl + "?ReturnTo=" + encodeURIComponent(c); window.location.href = c }).fail(function (a) { e.consumeEvent("logoff_error", "") })
        } function B(c, d) {
            var f = JSON.parse(c); a.cookiesAllowed = f.CookiesAllowed; 0 != f.CookiesAllowed || "Valid" in
            f && 1 == f.Valid ? "Valid" in f && 1 == f.Valid ? (sessvars.$.prefs.load = "kaercher", "validate_local_token" == e.currentState() ? e.consumeEvent("local_token_valid", f) : (e.consumeEvent("receive_remote_token_success", f), $.cookie.defaults.path = "/", $.cookie("LoadingCookie", "1"))) : 1 == f.CookiesAllowed && ("validate_local_token" == e.currentState() ? (e.consumeEvent("local_token_invalid_message", f), $.cookie.defaults.path = "/", $.removeCookie("LoadingCookie", "1")) : (sessvars.$.prefs.load = "KAPS", e.consumeEvent("receive_remote_token_failure",
            f)), b.consumeEvent("tab_active_validation_finished"), "function" == typeof kaercher.kaps.hideLoadingAnimation && kaercher.kaps.hideLoadingAnimation()) : (sessvars.$.prefs.load = "KAPS", e.consumeEvent("third_party_cookies_blooked"))
        } function C(a, c) {
            var b = JSON.parse(a); "ErrorMessage" in b && null != b.ErrorMessage ? e.consumeEvent("user_login_failed", b.ErrorMessage) : "Token" in b && null != b.Token ? (e.consumeEvent("user_login_success", b), $.cookie.defaults.path = "/", $.cookie("LoadingCookie", "1"), sessvars.$.prefs.load = "kaercher") :
            e.consumeEvent("user_login_service_error")
        } var v = {}, e = kaercher.utils.stateMachine("proto", a), u = null, w = null; v._initialize = function () {
            e.currentState("initial"); e.addTransition("start", "initial", d, "create_xdm_socket"); e.addTransition("xdm_socket_created", "create_xdm_socket", f, "restore_state"); e.addTransition("no_state_to_restore", "restore_state", l, "receive_local_token"); e.addTransition("receive_local_token_error", "receive_local_token", q, "service_error"); e.addTransition("receive_local_token_success",
            "receive_local_token", m, "validate_local_token"); e.addTransition("receive_local_token_failed", "receive_local_token", D, "receive_remote_token_message"); e.addTransition("receive_local_token_service_error", "initial", x, "service_error"); e.addTransition("local_token_valid", "validate_local_token", t, "token_valid"); e.addTransition("local_token_invalid", "validate_local_token", p, "receive_remote_token"); e.addTransition("local_token_validation_service_error", "validate_local_token", x, "service_error"); e.addTransition("receive_remote_token_success",
            "receive_remote_token", t, "token_valid"); e.addTransition("receive_remote_token_failure", "receive_remote_token", y, "request_user_login"); e.addTransition("receive_remote_token_service_error", "receive_remote_token", x, "service_error"); e.addTransition("local_token_invalid_message", "validate_local_token", t, "request_user_login"); e.addTransition("third_party_cookies_blooked", "validate_local_token", p, "receive_remote_token"); e.addTransition("third_party_cookies_blooked", "receive_remote_token_message", p, "receive_remote_token");
            e.addTransition("receive_remote_token_success", "receive_remote_token_message", t, "token_valid"); e.addTransition("receive_remote_token_failure", "receive_remote_token_message", t, "request_user_login"); e.addTransition("user_credentials_received", "request_user_login", A, "user_login"); e.addTransition("user_credentials_received", "service_error", A, "user_login"); e.addTransition("user_login_success", "user_login", E, "store_tokens"); e.addTransition("user_login_failed", "user_login", z, "request_user_login"); e.addTransition("user_login_service_error",
            "user_login", z, "service_error"); e.addTransition("finished_storing_tokens", "store_tokens", F, "token_valid"); e.addTransition("store_token_error", "store_tokens", q, "request_user_login"); e.addTransition("receive_signature_val_error", "validate_local_token", q, "receive_local_token"); e.addTransition("receive_signature_login_error", "user_login", q, "request_user_login"); e.addTransition("validate_SSO_error", "token_valid", q, "validate_local_token"); e.addTransition("validate_SSO_error", "request_user_login", q, "validate_local_token");
            e.addTransition("logoff_error", "logging_off", q, "token_valid"); e.addTransitionFromAnyState("should_logoff", H, "logging_off"); e.addTransition("logged_off", "logging_off", y, "request_user_login"); e.addTransition("tab_active", "service_error", c, "receive_local_token"); e.addTransition("tab_active", "request_user_login", c, "receive_local_token"); e.addTransition("tab_active", "token_valid", c, "receive_local_token"); return v
        }; v.consumeEvent = function (a, c) { e.consumeEvent(a, c) }; return v._initialize()
    }; kaercher.kaps.client.guiStateMachine =
    function (b) {
        function a() { b.onLoadIndicatorHide(); b.onLoginFormHide(); b.onLoggedInHide(); b.onServiceErrorHide(); if ("function" == typeof b.onLocalErrorHide) b.onLocalErrorHide() } function c(c) { a(); b.onLoadIndicatorShow() } function d(a) { b.onLoadIndicatorHide() } function g(a) { b.onLoadIndicatorHide(); "function" == typeof kaercher.kaps.hideLoadingAnimation && kaercher.kaps.hideLoadingAnimation(); if ("function" == typeof b.onLocalErrorShow) b.onLocalErrorShow() } function f(c) {
            a(); b.onLoggedInShow(); null != kaercher.utils.url("?Signature") &&
            (window.location.href = kaercher.utils.cleanedUpUrl())
        } function k(c) { a(); b.onLoginFormShow() } function n(a) { k(a); l(a) } function l(c) { a(); b.onServiceErrorShow() } var m = {}, h = kaercher.utils.stateMachine("gui", b); m._initialize = function () {
            h.addTransition("token_validation_success", "loading", f, "logged_in"); h.addTransition("token_validation_failed", "loading", k, "about_to_login"); h.addTransition("token_validation_failed", "logged_in", k, "about_to_login"); h.addTransition("token_validation_service_error", "loading",
            l, "service_error"); h.addTransitionFromAnyState("tab_active_validation", c, "loading"); h.addTransitionFromAnyState("tab_active_validation_finished", d, "loading"); h.addTransition("registering_user", "loading", a, "about_to_login"); h.addTransition("login_processing", "loading", c, "loading"); h.addTransition("login_processing", "about_to_login", c, "loading"); h.addTransition("login_success", "loading", f, "logged_in"); h.addTransition("login_failed", "loading", n, "about_to_login"); h.addTransition("login_service_error",
            "loading", l, "service_error"); h.addTransitionFromAnyState("local_error", g, h.currentState()); h.addTransitionFromAnyState("token_validating", c, "loading"); h.addTransitionFromAnyState("logoff_processing", c, "loading"); h.addTransition("store_token_error", a, "about_to_login"); return m
        }; m.consumeEvent = function (a, c) { h.consumeEvent(a, c) }; return m._initialize()
    }; kaercher.utils = kaercher.utils || {}; kaercher.utils.guid = function () {
        function b() { return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) } return b() +
        b() + "-" + b() + "-" + b() + "-" + b() + "-" + b() + b() + b()
    }; kaercher.utils.parseUrlQueryParams = function (b) { b = b.split("&"); var a = {}; $.each(b, function (c, b) { var g = b.split("="); g[0] && (a[g[0]] = g[1]) }); return a }; kaercher.utils.parseUrlPath = function (b) { b = b.split("/"); for (var a = {}, c = 0; c < b.length; ++c) "currentstate" == b[c].toLowerCase() && c < b.length && (a.CurrentState = b[c + 1]), "valid" == b[c].toLowerCase() && c < b.length && (a.Valid = b[c + 1]); return a }; kaercher.utils.appUrlFromWindowLocation = function () {
        return kaercher.utils.url("protocol") +
        "://" + kaercher.utils.url("host")
    }; kaercher.utils.cleanedUpReturnUrl = function () { var b = kaercher.utils.appUrlFromWindowLocation() + kaercher.utils.url("path"), a = kaercher.utils.cleanUpQueryParams(); return b + "?" + a }; kaercher.utils.cleanedUpUrl = function () { var b = kaercher.utils.appUrlFromWindowLocation() + kaercher.utils.url("path"), a = kaercher.utils.cleanUpQueryParams(); return 0 < kaercher.utils.url("#").length ? b + "?" + a + "#" + kaercher.utils.url("#") : b + "?" + a }; kaercher.utils.getElementPosition = function (b) {
        return $(window).width() /
        2
    }; kaercher.utils.getCookie = function (b) { b += "="; for (var a = document.cookie.split(";"), c = 0; c < a.length; c++) { for (var d = a[c]; " " == d.charAt(0) ;) d = d.substring(1, d.length); if (0 == d.indexOf(b)) return d.substring(b.length, d.length) } return null }; kaercher.utils.cookiesEnabled = function () { }; kaercher.utils.cleanUpQueryParams = function () {
        var b = kaercher.utils.parseUrlQueryParams(kaercher.utils.url("?")); delete b.currentState; delete b.CurrentState; delete b.Valid; delete b.SessionValid; delete b.Token; delete b.token; delete b.result;
        delete b.timeStamp; delete b.TimeStamp; delete b.signature; delete b.Signature; $.each(b, function (a, c) { b[a] = decodeURIComponent(c) }); return jQuery.param(b)
    }; kaercher.utils.showLoadingGif = function () { null == kaercher.utils.getCookie("LoadingCookie") && kaercher.kaps && "function" == typeof kaercher.kaps.showLoadingAnimation && kaercher.kaps.showLoadingAnimation() }; kaercher.utils.stateMachine = function (b, a) {
        var c = {}; a = jQuery.extend({ initialState: "loading", debug: !0 }, a); var d = a.initialState, g = {}, f = {}, k = null; c.currentState =
        function (a) { if (0 == arguments.length) return d; d = a }; c.addTransition = function (a, b, d, f) { "string" === typeof a && (a = [a]); "string" === typeof b && (b = [b]); $.each(a, function (a, c) { $.each(b, function (a, b) { f || (f = b); g[[c, b]] = [d, f] }) }); return c }; c.addTransitionFromAnyState = function (a, b, d) { "string" === typeof a && (a = [a]); $.each(a, function (a, c) { f[c] = [b, d] }); return c }; c.addDefaultTransition = function (a, b) { k = [a, b]; return c }; c.getTransitionFor = function (a, c) {
            var b = g[[a, c]] || f[a] || k; if (!b) {
                "function" == typeof kaercher.kaps.hideLoadingAnimation &&
                kaercher.kaps.hideLoadingAnimation(); if ("tab_active" != a) throw "Transition [" + a + "|" + c + "] is undefined"; return null
            } return [b[0], b[1] || d]
        }; c.consumeEvent = function (f, g) { var k = c.getTransitionFor(f, d); null != k ? (newState = k[1], callback = k[0], a.debug && console && console.log && (k = [], k.push(b + ": "), k.push(f + ": "), k.push(d + " -> " + newState), g && k.push("; with event data"), callback && k.push("; with callback")), d = newState, callback && callback.call(c, g)) : c.currentState(d) }; return c
    }; kaercher.utils.url = function () {
        function b(a) {
            return !isNaN(parseFloat(a)) &&
            isFinite(a)
        } return function (a, c) {
            var d = c || window.location.toString(); if (a) a = a.toString(); else return d; "//" === d.substring(0, 2) ? d = "http:" + d : 1 === d.split("://").length && (d = "http://" + d); c = d.split("/"); var g = "", f, k, n, l, m; l = c[2].split("@"); 1 === l.length ? l = l[0].split(":") : (g = l[0], l = l[1].split(":")); f = c[0]; k = l[0]; n = l[1] || ("https" === f.split(":")[0].toLowerCase() ? "443" : "80"); l = l[0] + (null !== l[1] && void 0 != l[1] && "" !== l[1] ? ":" + l[1] : ""); var h = m = (3 < c.length ? "/" : "") + c.slice(3, c.length).join("/").split("?")[0].split("#")[0];
            "/" === h.charAt(h.length - 1) && (h = h.substring(0, h.length - 1)); var p = k.split("."), h = h.split("/"); if ("hostname" === a) return k; if ("domain" === a) return /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(k) ? k : p.slice(-2).join("."); if ("sub" === a) return p.slice(0, p.length - 2).join("."); if ("port" === a) return n; if ("protocol" === a) return f.split(":")[0]; if ("auth" === a) return g; if ("user" === a) return g.split(":")[0]; if ("pass" === a) return g.split(":")[1] || ""; if ("path" ===
            a) return m; if ("host" === a) return l; if ("." === a.charAt(0)) { if (a = a.substring(1), b(a)) return a = parseInt(a, 10), p[0 > a ? p.length + a : a - 1] || "" } else {
                if (b(a)) return a = parseInt(a, 10), h[0 > a ? h.length + a : a] || ""; if ("file" === a) return h.slice(-1)[0]; if ("filename" === a) return h.slice(-1)[0].split(".")[0]; if ("fileext" === a) return h.slice(-1)[0].split(".")[1] || ""; if ("?" === a.charAt(0) || "#" === a.charAt(0)) {
                    g = null; "?" === a.charAt(0) ? d = (d.split("?")[1] || "").split("#")[0] : "#" === a.charAt(0) && (d = d.split("#")[1] || ""); if (!a.charAt(1)) return d;
                    a = a.substring(1); d = d.split("&"); f = 0; for (k = d.length; f < k; f++) if (g = d[f].split("="), g[0] === a) return g[1] || ""; return null
                }
            } return ""
        }
    }(); $(document).ready(function () {
        kaercher.utils.showLoadingGif(); (function (b, a, c, d) {
            var g, f, k = "onfocusin" in a && "hasFocus" in a ? "focusin focusout" : "focus blur", n = ["webkit", "o", "ms", "moz", ""], l = c.support, m = c.event; for (; (g = n.pop()) != d;) if (f = (g ? g + "H" : "h") + "idden", l.pageVisibility = "boolean" == typeof a[f]) { k = g + "visibilitychange"; break } c(/blur$/.test(k) ? b : a).on(k, function (c) {
                var b =
                c.type; if (c = c.originalEvent) { var g = c.toElement; (!/^focus./.test(b) || g == d && c.fromElement == d && c.relatedTarget == d) && m.trigger((f && a[f] || /^(?:blur|focusout)$/.test(b) ? "hide" : "show") + ".visibility") }
            })
        })(this, document, jQuery); $(document).on({ "show.visibility": function (b) { b.target == document && (kaercher.utils.showLoadingGif(), kaercher.kaps.SSO.startTokenValidationOnTabActivation()) }, "hide.visibility": function (b) { b.target == document && kaercher.kaps.SSO.startTabDeactivationEvent() } })
    }); sessvars = function () {
        var b =
        {}; b.$ = {
            prefs: { memLimit: 2E3, autoFlush: !0, crossDomain: !0, includeProtos: !1, includeFunctions: !1, load: "kaercher" }, parent: b, clearMem: function () { for (var a in this.parent) "$" != a && (this.parent[a] = void 0); this.flush() }, usedMem: function () { b = {}; return Math.round(this.flush(b) / 1024) }, usedMemPercent: function () { return Math.round(this.usedMem() / this.prefs.memLimit) }, flush: function (a) {
                var c; c = {}; var b = this.$$; a = a || top; for (var g in this.parent) c[g] = this.parent[g]; c.$ = this.prefs; b.includeProtos = this.prefs.includeProtos;
                b.includeFunctions = this.prefs.includeFunctions; c = this.$$.make(c); if (a != top) return c.length; if (c.length / 1024 > this.prefs.memLimit) return !1; a.name = c; return !0
            }, getDomain: function () { for (var a = location.href, a = a.split("///").join("//"), a = a.substring(a.indexOf("://") + 3).split("/")[0]; 2 < a.split(".").length;) a = a.substring(a.indexOf(".") + 1); return a }, debug: function (a) {
                a = a || this; var c = arguments.callee; if (document.body) {
                    a.flush(); var b = document.getElementById("sessvarsDebugDiv"); b || (b = document.createElement("div"),
                    document.body.insertBefore(b, document.body.firstChild)); b.id = "sessvarsDebugDiv"; b.innerHTML = '<div style="line-height:20px;padding:5px;font-size:11px;font-family:Verdana,Arial,Helvetica;z-index:10000;background:#FFFFCC;border: 1px solid #333;margin-bottom:12px"><b style="font-family:Trebuchet MS;font-size:20px">sessvars.js - debug info:</b><br/><br/>Memory usage: ' + a.usedMem() + " Kb (" + a.usedMemPercent() + '%)&nbsp;&nbsp;&nbsp;<span style="cursor:pointer"><b>[Clear memory]</b></span><br/>' + top.name.split("\n").join("<br/>") +
                    "</div>"; b.getElementsByTagName("span")[0].onclick = function () { a.clearMem(); location.reload() }
                } else setTimeout(function () { c(a) }, 200)
            }, init: function () {
                var a = {}, b = this; try { a = this.$$.toObject(top.name) } catch (d) { a = {} } this.prefs = a.$ || b.prefs; if (this.prefs.crossDomain || this.prefs.currentDomain == this.getDomain()) for (var g in a) this.parent[g] = a[g]; else this.prefs.currentDomain = this.getDomain(); this.parent.$ = b; b.flush(); a = function () { b.prefs.autoFlush && b.flush() }; window.addEventListener ? addEventListener("unload",
                a, !1) : window.attachEvent ? window.attachEvent("onunload", a) : this.prefs.autoFlush = !1
            }
        }; b.$.$$ = {
            compactOutput: !1, includeProtos: !1, includeFunctions: !1, detectCirculars: !0, restoreCirculars: !0, make: function (a, b) { this.restore = b; this.mem = []; this.pathMem = []; return this.toJsonStringArray(a).join("") }, toObject: function (a) {
                if (!this.cleaner) try { this.cleaner = /^("(\\.|[^"\\\n\r])*?"|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/ } catch (b) { this.cleaner = /^(true|false|null|\[.*\]|\{.*\}|".*"|\d+|\d+\.\d+)$/ } if (!this.cleaner.test(a)) return {};
                eval("this.myObj=" + a); if (!this.restoreCirculars || !alert) return this.myObj; if (this.includeFunctions) { a = this.myObj; for (var d in a) "string" != typeof a[d] || a[d].indexOf("JSONincludedFunc:") || (a[d] = a[d].substring(17), eval("x[i]=" + a[d])) } this.restoreCode = []; this.make(this.myObj, !0); a = this.restoreCode.join(";") + ";"; eval('r=r.replace(/\\W([0-9]{1,})(\\W)/g,"[$1]$2").replace(/\\.\\;/g,";")'); eval(a); return this.myObj
            }, toJsonStringArray: function (a, b) {
                b || (this.path = []); b = b || []; switch (typeof a) {
                    case "object": this.lastObj =
                    a; if (this.detectCirculars) { for (var d = this.mem, g = this.pathMem, f = 0; f < d.length; f++) if (a === d[f]) return b.push('"JSONcircRef:' + g[f] + '"'), b; d.push(a); g.push(this.path.join(".")) } if (a) {
                        if (a.constructor == Array) { b.push("["); for (f = 0; f < a.length; ++f) this.path.push(f), 0 < f && b.push(",\n"), this.toJsonStringArray(a[f], b), this.path.pop(); b.push("]") } else if ("undefined" != typeof a.toString) {
                            b.push("{"); d = !0; for (f in a) if (this.includeProtos || a[f] !== a.constructor.prototype[f]) this.path.push(f), g = b.length, d || b.push(this.compactOutput ?
                            "," : ",\n"), this.toJsonStringArray(f, b), b.push(":"), this.toJsonStringArray(a[f], b), void 0 == b[b.length - 1] ? b.splice(g, b.length - g) : d = !1, this.path.pop(); b.push("}")
                        } return b
                    } b.push("null"); return b; case "unknown": case "undefined": case "function": if (!this.includeFunctions) return b.push(void 0), b; a = "JSONincludedFunc:" + a; b.push('"'); d = '\n \\n \r \\r " \\"'.split(" "); a += ""; for (f = 0; 6 > f; f += 2) a = a.split(d[f]).join(d[f + 1]); b.push(a); b.push('"'); return b; case "string": this.restore && 0 == a.indexOf("JSONcircRef:") &&
                    this.restoreCode.push("this.myObj." + this.path.join(".") + "=" + a.split("JSONcircRef:").join("this.myObj.")); b.push('"'); d = '\n \\n \r \\r " \\"'.split(" "); a += ""; for (f = 0; 6 > f; f += 2) a = a.split(d[f]).join(d[f + 1]); b.push(a); b.push('"'); return b; default: return b.push(String(a)), b
                }
            }
        }; b.$.init(); return b
    }()
};
