/*!
         *	Cliplister Content Integration Lib.
         *
         *	File:			cllib.inc.js
         *	Copyright by:           Cliplister GmbH
         *	Author: 		Cliplister GmbH
         *	Version:		2.5
         * 	lastChanges:            @Changelog.txt
         *
         */
(function(n,t){function l(n){return new Object(n)}if(n.Cliplister===t){var c=function(){return new e},r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=function(){},i=n.document,o="mycliplister.com/cliplister/";var h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u,s,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;e.prototype={doneRks:[],clips:[],tmplist:[],request:{},initialLoad:!0,log:[],tmp:[],config:{shopId:0,SEO:!1,autoplay:!1,callbacks:{}},setID:function(n){this.setshopId(n)},setshopId:function(n){this.config.shopId=n},setSEO:function(n){this.config.SEO=n},setAutoplay:function(n){this.config.autoplay=n},player:function(){for(var n=0;n<this.player.arguments.length;n++){this.player.arguments[n].mode="player";switch(this.clTypeOf(this.player.arguments[n])){case"string":this.setID(this.player.arguments[n]);break;case"number":this.setID(this.player.arguments[n]);break;case"boolean":this.setSEO(this.player.arguments[n]);break;default:this.addClip(this.player.arguments[n])}}},thumbnail:function(){for(var n=0;n<this.thumbnail.arguments.length;n++){this.thumbnail.arguments[n].mode="thumbnail";switch(this.clTypeOf(this.thumbnail.arguments[n])){case"string":this.setID(this.thumbnail.arguments[n]);break;case"number":this.setID(this.thumbnail.arguments[n]);break;case"boolean":this.setSEO(this.thumbnail.arguments[n]);break;default:this.addClip(this.thumbnail.arguments[n])}}},onReadyBuildHTML:function(){this.initialLoad=!1;this.config.shopId===0&&this.readshopId();this.readAutoplay();this.readSEO();this.addSEO();this.addshopId();for(var n=0;n<this.clips.length;n++)this.clips[n].timer=(new Date).getTime();this.buildRequest()},readshopId:function(){for(var n=0;n<this.clips.length;n++)if(this.clips[n].shopId!==t){this.config.shopId=this.clips[n].shopId;break}},getCallback:function(n){return this.config.callbacks[n]},readSEO:function(){for(var n=0;n<this.clips.length;n++)if(this.clips[n].SEO!==t){this.setSEO(this.clips[n].SEO);break}},readAutoplay:function(){for(var n=0;n<this.clips.length;n++)if(this.clips[n].autoplay!==t){this.setAutoplay(this.clips[n].autoplay);break}},addshopId:function(){for(var n=0;n<this.clips.length;n++)this.clips[n].shopId=this.config.shopId},addSEO:function(){for(var n=0;n<this.clips.length;n++)this.clips[n].SEO=this.config.SEO},addClip:function(n){this.clTypeOf(n)==="array"?this.clips=this.clips.concat(n):this.clTypeOf(n)==="object"&&this.clips.push(n)},checkVideoAvailability:function(n,t){var i=new Image,r;i.onload=function(){i.width<2?n.style&&(n.style.height="0",n.style.width="0",n.style.visibility="hidden"):t&&t()};r=n.src.replace(/\/ind/g,"");i.src=r.replace(/\?.*/g,"")+"/cx"},JSONstringify:function(n,t,i){var r;if(u="",s="",typeof i=="number")for(r=0;r<i;r+=1)s+=" ";else typeof i=="string"&&(s=i);if(f=t,t&&typeof t!="function"&&(typeof t!="object"||typeof t.length!="number"))throw new Error("this.JSONstringify");return this.JSONstr("",{"":n})},JSONstr:function(n,t){var r,h,e,c,l=u,o,i=t[n];typeof f=="function"&&(i=f.call(t,n,i));switch(typeof i){case"string":return this.JSONquote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(u+=s,o=[],Object.prototype.toString.apply(i)==="[object Array]"){for(c=i.length,r=0;r<c;r+=1)o[r]=this.JSONstr(r,i)||"null";return e=o.length===0?"[]":u?"[\n"+u+o.join(",\n"+u)+"\n"+l+"]":"["+o.join(",")+"]",u=l,e}if(f&&typeof f=="object")for(c=f.length,r=0;r<c;r+=1)typeof f[r]=="string"&&(h=f[r],e=this.JSONstr(h,i),e&&o.push(this.JSONquote(h)+(u?": ":":")+e));else for(h in i)Object.prototype.hasOwnProperty.call(i,h)&&(e=this.JSONstr(h,i),e&&o.push(this.JSONquote(h)+(u?": ":":")+e));return e=o.length===0?"{}":u?"{\n"+u+o.join(",\n"+u)+"\n"+l+"}":"{"+o.join(",")+"}",u=l,e}},JSONquote:function(n){return h.lastIndex=0,h.test(n)?'"'+n.replace(h,function(n){var t=a[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n.replace(/[\u00A0-\u2666<>\&]/g,function(n){return"&#"+n.charCodeAt(0)+";"})+'"'},clTypeOf:function(n){return typeof n=="object"?n.length?"array":"object":typeof n},getHTML:function(u,f,e){var s=this.clips[u].playerID,c,h,l,d,a,v,y;s||(s=e?e:"Cliplister_"+this.getRandom(100,999999999999),this.clips[u].playerID=s);this.clips[u].onReady&&typeof this.clips[u].onReady=="function"&&(this.config.callbacks[s]=this.clips[u].onReady);var w=this.clips[u].urlPattern!==t?this.clips[u].urlPattern:"lcplay",b=this.config.autoplay!==t?this.config.autoplay:"false",p="";if(this.clips[u].param!==t)for(c in this.clips[u].param)p+="&"+c+"="+encodeURIComponent(this.clips[u].param[c]);if(h=this.clips[u].geo,this.clips[u].mode=="player"){l=n.location.protocol+"//"+(h?h+".":"")+o+w+r.charAt(63)+this.clips[u].shopId+r.charAt(63)+this.clips[u].request+"?id="+s+"&autoplay="+b+p;function k(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i]==n)return!0;return!1}d=this.clips[u].seoString!==t?this.clips[u].seoString:"";this.clips[u].request&&(i.getElementById(s)||(a=i.createElement("div"),a.id=s,f.appendChild(a)),typeof this.clips[u].indirect=="boolean"&&this.clips[u].indirect?(v=n.Cliplister.clips[u].size.split("x"),i.getElementById(s).innerHTML+='<iframe width="'+v[0]+'" height="'+v[1]+'" src="'+l+'" frameborder="0" onload="javascript:Cliplister.checkVideoAvailability(this)" scrolling="no"><\/iframe>'):k(this.clips[u].request,this.doneRks)||this.ajax(l,!0,this.setupResponse,u))}else this.clips[u].mode=="thumbnail"&&this.clips[u].request&&(y=this,this.checkVideoAvailability({src:n.location.protocol+"//"+(h?h+".":"")+o+"lcplay"+r.charAt(63)+this.clips[u].shopId+r.charAt(63)+this.clips[u].request+"/cx"},function(){var t=i.createElement("img");t.onload=function(){f.appendChild(this)};t.src=n.location.protocol+"//"+(h?h+".":"")+o+"thumbnail"+r.charAt(63)+y.clips[u].shopId+r.charAt(63)+y.clips[u].request}))},setupResponse:function(n,r){if(typeof n!==t){e.clips[r].response=n;try{eval(n.responseText+"")}catch(f){if(n.responseText.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"").match("^<")){var u=n.responseText;u.replace(/\ /g,"").match("position:absolute;")&&(u=u.replace(/ style=\"([a-z:0-9;]*)\"/g,""));i.getElementById(e.clips[r].playerID).innerHTML==""&&(i.getElementById(e.clips[r].playerID).innerHTML=u)}}}},buildRequest:function(){for(var u=0,i=0;i<this.clips.length;i++)this.request[i]=!0,this.clips[i]&&!this.clips[i].response&&this.config.shopId&&(this.request[i]=!1,this.tmp[i]=this.tmp[i]||{},this.tmp[i].elementID=this.clips[i].elementID,this.clips[i].elementID=t,this.tmp[i].mode=this.clips[i].mode,this.clips[i].mode=t,this.ajax(n.location.protocol+"//"+o+"lc"+r.charAt(63)+this.config.shopId+r.charAt(63)+"?"+this.encode(this.JSONstringify([this.clips[i]])),!0,function(i,r){var u,f,o;e=n.Cliplister;try{u=eval("("+i.responseText+")");n.Cliplister.clips[r]=Object.deepExtend(n.Cliplister.clips[r],u!=t?u[0]:[]);n.Cliplister.clips[r].elementID=n.Cliplister.tmp[r].elementID;n.Cliplister.clips[r].mode=n.Cliplister.tmp[r].mode;n.Cliplister.tmplist.length>0&&(n.Cliplister.clips=n.Cliplister.tmplist.concat(n.Cliplister.clips),n.Cliplister.tmplist=[]);n.Cliplister.request[r]=!0;f=!0;for(o in n.Cliplister.request)n.Cliplister.request[o]||(f=!1);f&&n.Cliplister.setupClipBuild()}catch(s){}},i),u++);u==0&&this.setupClipBuild()},reloadClips:function(){for(var n,t=0;t<this.clips.length;t++)if(n=i.getElementById(this.clips[t].playerID),n)while(n.hasChildNodes())n.removeChild(n.firstChild);this.onReadyBuildHTML()},setupClipBuild:function(){for(var r,n=0;n<this.clips.length;n++)this.clips[n].elementID!==t&&(r=i.getElementById(this.clips[n].elementID),r&&this.getHTML(n,r))},getRandom:function(n,t){if(n>t)return-1;if(n==t)return n;var i;do i=Math.random();while(i==1);return n+parseInt(i*(t-n+1))},ajax:function(t,i,r,u){var f=null;!n.XDomainRequest&&n.XMLHttpRequest?(f=new XMLHttpRequest,f.open("GET",t,i),f.timeout=5e3,f.onreadystatechange=function(){f.readyState==4&&(f.status==200&&f.responseText!=""?r(f,u):f.abort())}):(f=new XDomainRequest,f.timeout=5e3,f.onload=function(){r(f,u)},f.onprogress=function(){},f.ontimeout=function(){},f.onerror=function(){},f.open("GET",t));n.setTimeout(function(){f.send()},0)},ajaxPOST:function(t,i,r,u,f){var e=null;!n.XDomainRequest&&n.XMLHttpRequest?(e=new XMLHttpRequest,e.open("POST",t,r),e.timeout=5e3,e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){e.readyState==4&&e.status==200&&e.responseText!=""&&u(e,f)}):(e=new XDomainRequest,e.timeout=5e3,e.onload=function(){u(e,f)},e.onprogress=function(){},e.ontimeout=function(){},e.onerror=function(){},e.open("POST",t));n.setTimeout(function(){e.send("cldata="+i)},0)},loadJS:function(n,r){var e=i.getElementsByTagName("HEAD").item(0),u=i.createElement("script"),f=!1;u.language="javascript";u.type="text/javascript";typeof r===t&&(r=function(){});u.onreadystatechange=u.onload=function(){f||this.readyState&&!/loaded|complete/.test(this.readyState)||(f=!0,r())};u.src=n;e.appendChild(u)},encode:function(n){n=escape(n);var s="",f,t,i="",h,c,e,u="",o=0;do f=n.charCodeAt(o++),t=n.charCodeAt(o++),i=n.charCodeAt(o++),h=f>>2,c=(f&3)<<4|t>>4,e=(t&15)<<2|i>>6,u=i&63,isNaN(t)?e=u=64:isNaN(i)&&(u=64),s=s+r.charAt(h)+r.charAt(c)+r.charAt(e)+r.charAt(u),f=t=i="",h=c=e=u="";while(o<n.length);return s},decode:function(n){var t="",o,s,h="",c,f,i,e="",u=0;/[^A-Za-z0-9\+\/\=]/g.exec(n);n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c=r.indexOf(n.charAt(u++)),f=r.indexOf(n.charAt(u++)),i=r.indexOf(n.charAt(u++)),e=r.indexOf(n.charAt(u++)),o=c<<2|f>>4,s=(f&15)<<4|i>>2,h=(i&3)<<6|e,t=t+String.fromCharCode(o),i!==64&&(t=t+String.fromCharCode(s)),e!==64&&(t=t+String.fromCharCode(h)),o=s=h="",c=f=i=e="";while(u<n.length);return unescape(t)},addLoadEvent:function(t){var i=n.onload;n.onload=typeof n.onload!="function"?t:function(){try{i()}catch(n){}t()}}};n.Cliplister=n.CL=c();n.Clip=l;i.addEventListener?i.addEventListener("DOMContentLoaded",function(){n.Cliplister.addLoadEvent(function(){i.removeEventListener("DOMContentLoaded",arguments.callee,!1);n.Cliplister.initialLoad&&n.Cliplister.clips.length>0&&n.Cliplister.onReadyBuildHTML()})},!1):i.attachEvent&&i.attachEvent("onreadystatechange",function(){(i.readyState==="complete"||i.readyState==="loaded")&&n.Cliplister.addLoadEvent(function(){i.detachEvent("onreadystatechange",arguments.callee);n.Cliplister.clips.length>0&&n.Cliplister.onReadyBuildHTML()})});Object.isObjectLiteral=function(n){return n&&n.constructor&&n.constructor===Object};Object.deepExtend=function(n,t){for(var i in t)Object.isObjectLiteral(n[i])&&Object.isObjectLiteral(t[i])?(n[i]=n[i]||{},arguments.callee(n[i],t[i])):n[i]=t[i];return n}}})(window,undefined)